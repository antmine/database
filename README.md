# Database

This repository contains the SQL models for the [antmine project](https://github.com/antmine/antmine).

## Architecture

Datas are splits on 3 differents databases.
 - **Administration**:  all datas about clients and website
 - **Application**: this database is fill by [the metadata server](https://github.com/antmine/metadata-server). It contains all datas harvested during mining session
 - **Dashbaord**: all datas generated for the dashboard.
 
### Administration
This database is composed by 9 tables.
 - **ADMIN_CLIENT** is basically the [dashboard](https://github.com/antmine/dashboard-frontend)'s user.
 - **ADDRESS** is the user's postal address.
 - **WEBSITE**  is a website.
 - **CLIENT_WEBSITE** is the link table between clients and websistes. A website belong to one and only one client.
- **CRYPTO_CURRENCY** _not used for now_.
- **CRYPTO_CURRENCY_WEBSITE** _not used for now_.
- **CLIENT_URL_ACTIVATION** contains the temporary link to activate new account.
- **CLIENT_URL_RESET** contains the temporary link to reset password.
- **WALLET_AUTH** contains the antmine's bitcoin wallet.

### Application
This database is composed by 3 tables.
 - **MINER**, a miner is just a computer mining bitcoin for antmine.
 - **MINER_WEBSITE** is the link table between miners and websites.  A website belong to one and only one website.
 - **MINER_EVENT** contains all events (mining/not mining) with timestamp for a unique miner.
 
 ### Dashboard
This database is composed by 3 tables.
/!\ This database contains faked datas generated by the [dashboard API](https://github.com/antmine/dashboard-backend).
 - **VISITORS_WEBSITE**, count of visitor per website, per day.
 - **MOST_VIEWED_PAGES** top 10 of most viewed pages per website, per day.
 - **COUNTRY_RANKING** top 10 of visitor's country per website, per day.
  - **CRYPTO_MONEY** sum of wined bitcoin per website, per day.
